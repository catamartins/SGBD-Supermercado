CREATE TABLE Produto (
	cod_barras VARCHAR(13) PRIMARY KEY,
	nome VARCHAR(255) NOT NULL,
	tipo_produto VARCHAR(255) NOT NULL
	preço_venda DECIMAL(10, 2) NOT NULL
);

CREATE TABLE Fornecedor (
	cod_fornecedor SERIAL PRIMARY KEY,
	nome_fornecedor VARCHAR(255) NOT NULL,
	data_contratacao DATE NOT NULL
);

CREATE TABLE Lote(
	cod_lote SERIAL NOT NULL,
	quantidade INT NOT NULL,
	FOREIGN KEY (cod_fornecedor) REFERENCES Fornecedor(cod_fornecedor)
);

CREATE TABLE Setor(
	cod_setor SERIAL PRIMARY KEY,
	nome_setor VARCHAR(255) NOT NULL,
	--FOREIGN KEY (cpf_gerente) REFERENCES Funcionário(cpf) adicionar dps pq funcionário referencia setor
);

CREATE TABLE Venda(
	cod_venda SERIAL PRIMARY KEY,
	data_venda DATE NOT NULL,
	FOREIGN KEY (cpf_funcionario) REFERENCES Funcionário(cpf),
	valor_total DECIMAL (10, 2) NOT NULL,
	forma_pagamento VARCHAR(20) NOT NULL,
	qntd_parcelas INT,
	valor_desconto DECIMAL (10, 2)
);

CREATE TABLE Funcionário(
	cpf CHAR(11) PRIMARY KEY,
	nome_completo VARCHAR(255) NOT NULL,
	FOREIGN KEY (cod_setor) REFERENCES Setor(cod_setor),
	genero VARCHAR(20),
	endereco VARCHAR(255),
	salario DECIMAL(10, 2) NOT NULL
);

CREATE TABLE acougueiro (
	cpf CHAR(11) PRIMARY KEY REFERENCES funcionario(cpf),
	certificacao VARCHAR(100),
	epi_entregue BOOLEAN
);

CREATE TABLE padeiro (
	cpf CHAR(11) PRIMARY KEY REFERENCES funcionario(cpf),
	certificacao VARCHAR(100),
	epi_entregue BOOLEAN
);

CREATE TABLE analista_financeiro (
	cpf CHAR(11) PRIMARY KEY REFERENCES funcionario(cpf),
	certificacao VARCHAR(100)
);

CREATE TABLE operador (
	cpf CHAR(11) PRIMARY KEY REFERENCES funcionario(cpf),
	posto_pdv VARCHAR(50)
);

CREATE TABLE Venda_Contem_Produto (
    cod_venda INT REFERENCES Venda(cod_venda),
    cod_barras VARCHAR(13) REFERENCES Produto(cod_barras),
    quantidade INT NOT NULL,
    PRIMARY KEY (cod_venda, cod_barras)
);

CREATE TABLE Fornecedor_Produto (
    cod_fornecedor INT REFERENCES Fornecedor(cod_fornecedor),
    cod_barras VARCHAR(13) REFERENCES Produto(cod_barras),
    PRIMARY KEY (cod_fornecedor, cod_barras)
);

ALTER TABLE Setor
    ADD CONSTRAINT fk_gerente FOREIGN KEY (cpf_gerente) REFERENCES Funcionario(cpf);

